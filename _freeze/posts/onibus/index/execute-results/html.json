{
  "hash": "ac63a2ab1838aa09359910ea0e9b57e9",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Análise de Linhas e Paradas SPTrans\"\nauthor: \"Harlow Malloc\"\ndate: \"2025-11-25\"\ncategories: [news, code, analysis, transporte]\nimage: \"image.jpg\"\nformat: \n  html:\n    code-fold: false\n    code-tools: true\n---\n\n## Introdução\n\nEste documento apresenta uma análise das linhas de ônibus da SPTrans na região da Lapa, utilizando a API Olho Vivo. O código busca informações sobre linhas, paradas e posições dos veículos, gerando visualizações interativas em mapa.\n\n## Configuração e Autenticação\n\nPrimeiro, realizamos a autenticação na API SPTrans e buscamos as linhas disponíveis na região da Lapa.\n\n::: {#b39df00d .cell execution_count=1}\n``` {.python .cell-code}\nimport os\nimport requests\nimport json\nfrom dotenv import load_dotenv\nfrom folium import Map, Marker\n\n# Carrega variáveis de ambiente\nload_dotenv(\".env\")\n\n# Inicia sessão e autentica na API\ns = requests.Session()\nres = s.post(\n    f\"http://api.olhovivo.sptrans.com.br/v2.1/Login/Autenticar?token={os.getenv('SPTRANS_TOKEN')}\"\n)\nprint(f\"Status da autenticação: {res.text}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nStatus da autenticação: true\n```\n:::\n:::\n\n\n## Busca de Linhas na Lapa\n\nAgora buscamos todas as linhas que passam pela região da Lapa.\n\n::: {#8a9926b0 .cell execution_count=2}\n``` {.python .cell-code}\n# Busca linhas na região da Lapa\nlinhas_lapa = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1/Linha/Buscar?termosBusca=Lapa\"\n)\nlinhas_lapa = linhas_lapa.json()\n\n# Exibe as 3 primeiras linhas\nprint(f\"Total de linhas encontradas: {len(linhas_lapa)}\")\nprint(\"\\nPrimeiras 3 linhas:\")\nfor linha in linhas_lapa[:3]:\n    print(f\"- {linha}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal de linhas encontradas: 152\n\nPrimeiras 3 linhas:\n- {'cl': 841, 'lc': False, 'lt': '118Y', 'sl': 1, 'tl': 10, 'tp': 'LAPA', 'ts': 'LAUZANE PAULISTA'}\n- {'cl': 33609, 'lc': False, 'lt': '118Y', 'sl': 2, 'tl': 10, 'tp': 'LAPA', 'ts': 'LAUZANE PAULISTA'}\n- {'cl': 2273, 'lc': False, 'lt': '119L', 'sl': 1, 'tl': 10, 'tp': 'TERM. LAPA', 'ts': 'VL. SULINA'}\n```\n:::\n:::\n\n\n## Mapeamento de Paradas\n\nBuscamos as paradas da linha 2506 e criamos um mapa interativo com todas as paradas.\n\n::: {#4be82c8a .cell execution_count=3}\n``` {.python .cell-code}\n# Busca paradas da linha 2506\nres = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1/Parada/BuscarParadasPorLinha?codigoLinha=2506\"\n)\nparadas = res.json()\n\nprint(f\"Total de paradas encontradas: {len(paradas)}\")\nprint(\"\\nPrimeiras 3 paradas:\")\nfor parada in paradas[:3]:\n    print(f\"- {parada}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal de paradas encontradas: 15\n\nPrimeiras 3 paradas:\n- {'cp': 7014417, 'np': 'ANGELICA B/C', 'ed': 'AV   ANGELICA', 'py': -23.534564, 'px': -46.654302}\n- {'cp': 60016784, 'np': 'PARADA PALMEIRAS B/C', 'ed': 'R PADRE ANTONIO TOMAS/ AV POMPEIA', 'py': -23.525799, 'px': -46.679251}\n- {'cp': 60016786, 'np': 'ANTARTICA B/C', 'ed': 'PC SOUSA ARANHA/ VDTO ANTARTICA', 'py': -23.526523, 'px': -46.673588}\n```\n:::\n:::\n\n\n## Visualização das Paradas no Mapa\n\nCriamos um mapa interativo com todas as paradas da linha.\n\n::: {#8d44c766 .cell execution_count=4}\n``` {.python .cell-code}\n# Cria mapa centrado na primeira parada\nm = Map(location=[paradas[3][\"py\"], paradas[3][\"px\"]], zoom_start=14)\n\n# Adiciona marcador para cada parada\nfor i in paradas:\n    Marker(location=[i[\"py\"], i[\"px\"]], popup=i[\"np\"]).add_to(m)\n\n# Salva o mapa\nm.save(\"2506.html\")\nprint(\"Mapa salvo como '2506.html'\")\n\n# Exibe o mapa\nm\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nMapa salvo como '2506.html'\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_73d1b8e58987a3e74cd8b43ee262602b {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_73d1b8e58987a3e74cd8b43ee262602b&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_73d1b8e58987a3e74cd8b43ee262602b = L.map(\n                &quot;map_73d1b8e58987a3e74cd8b43ee262602b&quot;,\n                {\n                    center: [-23.528131, -46.670652],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 14,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_6c64d96701d329e0de4f7ab0bd8e02a0 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_6c64d96701d329e0de4f7ab0bd8e02a0.addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n            var marker_344ae68108a7307029d76f6862cb9d45 = L.marker(\n                [-23.534564, -46.654302],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_80e4d5b4d7d0c5a34b05a6401a92e357 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_9e341224723db03c1a600b8002e58c1c = $(`&lt;div id=&quot;html_9e341224723db03c1a600b8002e58c1c&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANGELICA B/C&lt;/div&gt;`)[0];\n                popup_80e4d5b4d7d0c5a34b05a6401a92e357.setContent(html_9e341224723db03c1a600b8002e58c1c);\n            \n        \n\n        marker_344ae68108a7307029d76f6862cb9d45.bindPopup(popup_80e4d5b4d7d0c5a34b05a6401a92e357)\n        ;\n\n        \n    \n    \n            var marker_bf1fa37423c73140c4f11a3c96d6c206 = L.marker(\n                [-23.525799, -46.679251],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_3314d6ec88a52b617e443ee80ff94b52 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_4d86cfc5b3a03e41f100acd1434d1aae = $(`&lt;div id=&quot;html_4d86cfc5b3a03e41f100acd1434d1aae&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PARADA PALMEIRAS B/C&lt;/div&gt;`)[0];\n                popup_3314d6ec88a52b617e443ee80ff94b52.setContent(html_4d86cfc5b3a03e41f100acd1434d1aae);\n            \n        \n\n        marker_bf1fa37423c73140c4f11a3c96d6c206.bindPopup(popup_3314d6ec88a52b617e443ee80ff94b52)\n        ;\n\n        \n    \n    \n            var marker_1a93153d14625af64b7d419fec05e8d7 = L.marker(\n                [-23.526523, -46.673588],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_fc348654ad491085ca48a132260fab0f = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_3fd6e9bb2c3050ea31194b8113d834f4 = $(`&lt;div id=&quot;html_3fd6e9bb2c3050ea31194b8113d834f4&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANTARTICA B/C&lt;/div&gt;`)[0];\n                popup_fc348654ad491085ca48a132260fab0f.setContent(html_3fd6e9bb2c3050ea31194b8113d834f4);\n            \n        \n\n        marker_1a93153d14625af64b7d419fec05e8d7.bindPopup(popup_fc348654ad491085ca48a132260fab0f)\n        ;\n\n        \n    \n    \n            var marker_a04abab7188d6509290ba5c6e3f5b94f = L.marker(\n                [-23.528131, -46.670652],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_272eb6110b0ebffdf8f64f6c336b6f29 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_a423eed5f1e811582b7bc9ea9a41d6a7 = $(`&lt;div id=&quot;html_a423eed5f1e811582b7bc9ea9a41d6a7&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;BABY BARIONY B/C&lt;/div&gt;`)[0];\n                popup_272eb6110b0ebffdf8f64f6c336b6f29.setContent(html_a423eed5f1e811582b7bc9ea9a41d6a7);\n            \n        \n\n        marker_a04abab7188d6509290ba5c6e3f5b94f.bindPopup(popup_272eb6110b0ebffdf8f64f6c336b6f29)\n        ;\n\n        \n    \n    \n            var marker_2ea626b6f31aa52afa861ea6b167959f = L.marker(\n                [-23.53021, -46.6669],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_200dc4746da65269cb713bc34f412917 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_ef69dca4e268a83e9008818cbe152c64 = $(`&lt;div id=&quot;html_ef69dca4e268a83e9008818cbe152c64&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PQ. DA ÁGUA BRANCA B/C&lt;/div&gt;`)[0];\n                popup_200dc4746da65269cb713bc34f412917.setContent(html_ef69dca4e268a83e9008818cbe152c64);\n            \n        \n\n        marker_2ea626b6f31aa52afa861ea6b167959f.bindPopup(popup_200dc4746da65269cb713bc34f412917)\n        ;\n\n        \n    \n    \n            var marker_8c7dbcafe1f92ea2fd7882dc7f2f2a61 = L.marker(\n                [-23.52494, -46.698995],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_cce85edfbc9d75fc5f012076143cbad1 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_87cd35c66c8660c5f6c91b76749d6dff = $(`&lt;div id=&quot;html_87cd35c66c8660c5f6c91b76749d6dff&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;SCIPIAO B/C&lt;/div&gt;`)[0];\n                popup_cce85edfbc9d75fc5f012076143cbad1.setContent(html_87cd35c66c8660c5f6c91b76749d6dff);\n            \n        \n\n        marker_8c7dbcafe1f92ea2fd7882dc7f2f2a61.bindPopup(popup_cce85edfbc9d75fc5f012076143cbad1)\n        ;\n\n        \n    \n    \n            var marker_158322c35f0852c7b6d63b134e9104e6 = L.marker(\n                [-23.524994, -46.695297],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_ba683c9889fc53e5dfdedb246b467586 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_0bb6bb77fc1d272c299cd01204c8af80 = $(`&lt;div id=&quot;html_0bb6bb77fc1d272c299cd01204c8af80&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;VESPASIANO B/C&lt;/div&gt;`)[0];\n                popup_ba683c9889fc53e5dfdedb246b467586.setContent(html_0bb6bb77fc1d272c299cd01204c8af80);\n            \n        \n\n        marker_158322c35f0852c7b6d63b134e9104e6.bindPopup(popup_ba683c9889fc53e5dfdedb246b467586)\n        ;\n\n        \n    \n    \n            var marker_6c677168db07f81f74082ba4630497fd = L.marker(\n                [-23.525029, -46.690074],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_0693dd3e0a2a9dc93390542d4853f0a8 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_7165d234eabc639a952154a50557daf5 = $(`&lt;div id=&quot;html_7165d234eabc639a952154a50557daf5&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;CORNELIA&lt;/div&gt;`)[0];\n                popup_0693dd3e0a2a9dc93390542d4853f0a8.setContent(html_7165d234eabc639a952154a50557daf5);\n            \n        \n\n        marker_6c677168db07f81f74082ba4630497fd.bindPopup(popup_0693dd3e0a2a9dc93390542d4853f0a8)\n        ;\n\n        \n    \n    \n            var marker_9bac21b97512eb24daf72757b740dbd7 = L.marker(\n                [-23.523407, -46.700541],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_24500cc0ecec4a11d39beb1229b522f5 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_899b57d142290c33fb66170c5f41c792 = $(`&lt;div id=&quot;html_899b57d142290c33fb66170c5f41c792&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;CATAO B/C&lt;/div&gt;`)[0];\n                popup_24500cc0ecec4a11d39beb1229b522f5.setContent(html_899b57d142290c33fb66170c5f41c792);\n            \n        \n\n        marker_9bac21b97512eb24daf72757b740dbd7.bindPopup(popup_24500cc0ecec4a11d39beb1229b522f5)\n        ;\n\n        \n    \n    \n            var marker_38e5c056701ee5233ac025ed291f0f05 = L.marker(\n                [-23.52517, -46.683408],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_a53d7d19127a8cc25f47ccdde4b9f26d = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_a4826fd3f772b55215b05bb61b81d09a = $(`&lt;div id=&quot;html_a4826fd3f772b55215b05bb61b81d09a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;SESC POMPEIA B/C&lt;/div&gt;`)[0];\n                popup_a53d7d19127a8cc25f47ccdde4b9f26d.setContent(html_a4826fd3f772b55215b05bb61b81d09a);\n            \n        \n\n        marker_38e5c056701ee5233ac025ed291f0f05.bindPopup(popup_a53d7d19127a8cc25f47ccdde4b9f26d)\n        ;\n\n        \n    \n    \n            var marker_ebc584482c5e6e97775f5959920069f7 = L.marker(\n                [-23.540545, -46.643624],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_9452b5dda8f99deae791ef6cc84c4681 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_4619f7a6895f570bdf35d96088001079 = $(`&lt;div id=&quot;html_4619f7a6895f570bdf35d96088001079&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;VITORIA B/C&lt;/div&gt;`)[0];\n                popup_9452b5dda8f99deae791ef6cc84c4681.setContent(html_4619f7a6895f570bdf35d96088001079);\n            \n        \n\n        marker_ebc584482c5e6e97775f5959920069f7.bindPopup(popup_9452b5dda8f99deae791ef6cc84c4681)\n        ;\n\n        \n    \n    \n            var marker_da5e47a4078fccba08153c5d09d2e3a6 = L.marker(\n                [-23.532847, -46.657404],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_ca004cdf96aa1eef326b97a638c488cf = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_de82a9dc093aaaac8e273e2b2985c533 = $(`&lt;div id=&quot;html_de82a9dc093aaaac8e273e2b2985c533&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ROSA E SILVA C/B&lt;/div&gt;`)[0];\n                popup_ca004cdf96aa1eef326b97a638c488cf.setContent(html_de82a9dc093aaaac8e273e2b2985c533);\n            \n        \n\n        marker_da5e47a4078fccba08153c5d09d2e3a6.bindPopup(popup_ca004cdf96aa1eef326b97a638c488cf)\n        ;\n\n        \n    \n    \n            var marker_ae6c93f2fa452082cd719d94e4634ad3 = L.marker(\n                [-23.538708, -46.646888],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_aa526d164e4b8897acb494d234d871d0 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_3b3764cf1820a81e4ed2e2e3825415bb = $(`&lt;div id=&quot;html_3b3764cf1820a81e4ed2e2e3825415bb&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANA CINTRA B/C&lt;/div&gt;`)[0];\n                popup_aa526d164e4b8897acb494d234d871d0.setContent(html_3b3764cf1820a81e4ed2e2e3825415bb);\n            \n        \n\n        marker_ae6c93f2fa452082cd719d94e4634ad3.bindPopup(popup_aa526d164e4b8897acb494d234d871d0)\n        ;\n\n        \n    \n    \n            var marker_195ba8ab4a036723e2c21c44f1714a8e = L.marker(\n                [-23.532068, -46.660957],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_9d884773718accbd682cf7758d5cb561 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_5b4c6a459ee2aac2fb98fda1b2dcbd8b = $(`&lt;div id=&quot;html_5b4c6a459ee2aac2fb98fda1b2dcbd8b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PACAEMBU B/C&lt;/div&gt;`)[0];\n                popup_9d884773718accbd682cf7758d5cb561.setContent(html_5b4c6a459ee2aac2fb98fda1b2dcbd8b);\n            \n        \n\n        marker_195ba8ab4a036723e2c21c44f1714a8e.bindPopup(popup_9d884773718accbd682cf7758d5cb561)\n        ;\n\n        \n    \n    \n            var marker_274b52d34f4c69b3cb0bce0958041bb6 = L.marker(\n                [-23.536318, -46.651201],\n                {\n}\n            ).addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n    \n        var popup_3e717df3b944b43e73b0dca3eef02d17 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_d180a52979147a4fb22de523885023a8 = $(`&lt;div id=&quot;html_d180a52979147a4fb22de523885023a8&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;NOTHMANN C/B&lt;/div&gt;`)[0];\n                popup_3e717df3b944b43e73b0dca3eef02d17.setContent(html_d180a52979147a4fb22de523885023a8);\n            \n        \n\n        marker_274b52d34f4c69b3cb0bce0958041bb6.bindPopup(popup_3e717df3b944b43e73b0dca3eef02d17)\n        ;\n\n        \n    \n    \n            tile_layer_6c64d96701d329e0de4f7ab0bd8e02a0.addTo(map_73d1b8e58987a3e74cd8b43ee262602b);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n```\n:::\n:::\n\n\n## Posição em Tempo Real dos Veículos\n\nConsultamos a posição atual dos veículos da linha.\n\n::: {#f3e93faf .cell execution_count=5}\n``` {.python .cell-code}\n# Busca posição dos veículos\npos = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1//Posicao/Linha?codigoLinha=2506\"\n)\nposicoes = pos.json()\n\nprint(f\"Dados de posição: {posicoes}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDados de posição: {'hr': '21:31', 'vs': [{'p': '12599', 'a': True, 'ta': '2025-11-25T00:30:42Z', 'py': -23.52087225, 'px': -46.70017, 'sv': None, 'is': None}, {'p': '12732', 'a': True, 'ta': '2025-11-25T00:30:53Z', 'py': -23.520449499999998, 'px': -46.6996115, 'sv': None, 'is': None}, {'p': '12601', 'a': True, 'ta': '2025-11-25T00:27:30Z', 'py': -23.535463749999998, 'px': -46.652741, 'sv': None, 'is': None}, {'p': '12533', 'a': True, 'ta': '2025-11-25T00:30:55Z', 'py': -23.527812499999996, 'px': -46.671280499999995, 'sv': None, 'is': None}]}\n```\n:::\n:::\n\n\n## Conclusão\n\nEste documento demonstra como utilizar a API Olho Vivo da SPTrans para obter informações sobre transporte público em São Paulo, incluindo linhas, paradas e posicionamento em tempo real dos veículos.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}